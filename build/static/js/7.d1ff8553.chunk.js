(this.webpackJsonpaudio_planet_store=this.webpackJsonpaudio_planet_store||[]).push([[7],{104:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return i})),n.d(t,"h",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return p})),n.d(t,"e",(function(){return b})),n.d(t,"b",(function(){return h}));var r=n(106),a=n.n(r),c=n(108),s=n(30),o=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.ref().child("products").get();case 2:for(c in t=e.sent,n=t.val(),r=[],n)r.push({ID:c,brand:n[c].brand,full_name:n[c].fullname,photo:n[c].photo,type:n[c].type,price:n[c].price});return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.ref().child("products").child(t).get();case 2:return n=e.sent,r=n.val(),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.ref().child("users").child(t).child("userDetails").get();case 2:return n=e.sent,r=n.val(),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e,t,n,r,a){s.b.ref("users/"+s.a.currentUser.uid+"/userDetails").set({phone:e,county:t,city:n,address:r,postal:a},(function(e){e?console.log("updateing user detail failed"+e):console.log("user details saved")}))},d=function(e,t,n,r,a,c){s.b.ref("users/"+s.a.currentUser.uid+"/orders/"+c).set({basket:e,totalItems:t,totalAmmount:n,orderDetails:a,date:r},(function(e){e?console.log("error at sending orde"+e):console.log("orderSent")}))},p=function(e,t,n,r,a,c){s.b.ref("orders/"+c).set({basket:e,totalItems:t,totalAmmount:n,orderDetails:a,date:r},(function(e){e?console.log("error at sending orde"+e):console.log("orderSent")}))},b=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.ref().child("users").child(t).child("orders").get();case 2:for(o in n=e.sent,r=n.val(),c=[],r)c.push({orderID:o,total:r[o].totalAmmount,date:r[o].date});return e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.ref().child("users").child(t).child("orders").child(n).get();case 2:return r=e.sent,c=r.val(),e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},132:function(e,t,n){"use strict";var r=n(133),a=n.n(r),c=n(159),s=n.n(c),o=n(10),u=n(3),i=n(2),l=Object(u.forwardRef)((function(e,t){return Object(i.jsxs)("div",{ref:t,className:a.a.product,children:[Object(i.jsxs)(o.b,{to:"products/"+e.id,className:a.a.productDescription,children:[Object(i.jsx)("div",{className:a.a.productImage,children:Object(i.jsx)("img",{draggable:"false",src:e.image,alt:""})}),Object(i.jsxs)("div",{className:a.a.productText,children:[Object(i.jsx)("h3",{children:e.name}),Object(i.jsxs)("p",{children:[e.price," RON buc."]})]})]}),Object(i.jsxs)("div",{className:a.a.controls,children:[Object(i.jsxs)("div",{className:a.a.ammountControls,children:[Object(i.jsx)("button",{onClick:function(){e.onDecrease(e.id)},className:a.a.minus,children:"-"}),Object(i.jsx)("p",{children:e.ammount}),Object(i.jsx)("button",{onClick:function(){var t={productID:e.id};e.onIncrease(t)},className:a.a.plus,children:"+"})]}),Object(i.jsx)("button",{onClick:function(){e.onDelete(e.id)},className:a.a.deleteItem,children:Object(i.jsx)(s.a,{})})]})]})}));t.a=l},133:function(e,t,n){e.exports={product:"CheckoutProduct_product__1IkBP",productDescription:"CheckoutProduct_productDescription__P8OEp",productText:"CheckoutProduct_productText__5PxhV",productImage:"CheckoutProduct_productImage__2m3YL",controls:"CheckoutProduct_controls__PmVIs",ammountControls:"CheckoutProduct_ammountControls__1PxFi",deleteItem:"CheckoutProduct_deleteItem__34JfN",minus:"CheckoutProduct_minus__1JzKZ",plus:"CheckoutProduct_plus__2Y4ib"}},228:function(e,t,n){e.exports={myAccountPage:"OrderDetails_myAccountPage__3cRj3",userDetails:"OrderDetails_userDetails__1W_yM",inputLabel:"OrderDetails_inputLabel__3J2Ud",submitBtn:"OrderDetails_submitBtn__1dBDm",paymentMethodBtn:"OrderDetails_paymentMethodBtn__1vsOn",active:"OrderDetails_active__1w2rm",summary:"OrderDetails_summary__1btMC"}},235:function(e,t){},237:function(e,t){},248:function(e,t){},250:function(e,t){},277:function(e,t){},279:function(e,t){},280:function(e,t){},285:function(e,t){},287:function(e,t){},293:function(e,t){},295:function(e,t){},314:function(e,t){},326:function(e,t){},329:function(e,t){},332:function(e,t,n){e.exports={orderSucces:"OrderSucces_orderSucces__iJr_6",thankGif:"OrderSucces_thankGif__7GQj0"}},342:function(e,t,n){"use strict";n.r(t);var r=n(31),a=n(11),c=n(16),s=n(228),o=n.n(s),u=n(23),i=n(3),l=n(33),d=n(104),p=n(333),b=n.n(p),h=n(134),j=n.n(h),m=n(132),f=n(12),O=n(126),x=n(229),v=n.n(x),y=n(332),_=n.n(y),g=n(10),C=n(30),D=n(2);var N=function(e){var t=e.orderID,n=Object(i.useState)(10),r=Object(c.a)(n,2),a=r[0],s=r[1],o=Object(f.g)();return Object(i.useEffect)((function(){var e=setInterval((function(){s((function(e){return e-1}))}),1e3);return function(){clearInterval(e)}}),[]),0===a&&o.push("/"),Object(D.jsxs)("div",{className:_.a.orderSucces,children:[Object(D.jsx)("div",{className:_.a.thankGif,children:Object(D.jsx)("img",{draggable:"false",src:"https://c.tenor.com/AEq_MsuoaXsAAAAC/leonardo-dicaprio-thank-you.gif",alt:"thank_you"})}),Object(D.jsx)("h2",{children:"Thanks for your muney!"}),Object(D.jsxs)("p",{children:["Your order ID is : ",Object(D.jsx)("span",{children:t})]}),C.a.currentUser&&Object(D.jsxs)("p",{children:["You can view all your orders in ",Object(D.jsx)(g.b,{to:"myorders",children:"My orders"})," section"]}),Object(D.jsxs)("p",{children:["You will be redirected to ",Object(D.jsx)(g.b,{to:"/",children:"main page"})," in ",a," seconds"]})]})},k=n(160);t.default=function(e){var t=e.inputsError,n=Object(i.useContext)(l.b),s=Object(c.a)(n,2),p=s[0],h=p.user,x=p.basket,y=p.basketItems,_=p.basketTotal,g=s[1],C=Object(i.useState)(!0),I=Object(c.a)(C,2),P=I[0],S=I[1],w=Object(i.useState)(!1),A=Object(c.a)(w,2),E=A[0],F=A[1],B=Object(i.useState)(v.a.generate()),L=Object(c.a)(B,1)[0],M=Object(f.g)(),T=function(e){e.preventDefault(),S((function(e){return!e}))},J=Object(i.useState)({personal:{name:"",phone:""},details:{county:"",city:"",address:"",postal:""},card:{cardholder:"",cardnumber:"",cardcvc:"",cardexpire:""}}),R=Object(c.a)(J,2),Y=R[0],V=R[1];Object(i.useEffect)((function(){h&&Object(d.d)(h.uid).then((function(e){V({personal:{name:h.displayName,phone:(null===e||void 0===e?void 0:e.phone)||""},details:{county:(null===e||void 0===e?void 0:e.county)||"",city:(null===e||void 0===e?void 0:e.city)||"",address:(null===e||void 0===e?void 0:e.address)||"",postal:(null===e||void 0===e?void 0:e.postal)||""},card:{cardholder:"It's on me this time ",cardnumber:"4242 4242 4242 4242",cardcvc:"999",cardexpire:""}})}))}),[h]);var G=function(e){g({type:"ADD_TO_BASKET",product:e,ammount:1})},K=function(e){g({type:"DECREASE_ONE",productID:e})},U=function(e){g({type:"REMOVE_FROM_BASKET",productID:e})},q=function(e,t){return function(n){V((function(c){var s=Object(a.a)({},c[e]);return s[t]=n.target.value,Object(a.a)(Object(a.a)({},c),{},Object(r.a)({},e,Object(a.a)({},s)))}))}};return y||E||M.push("checkout"),Object(D.jsx)(u.a,{className:o.a.myAccountPage,children:E?Object(D.jsx)(N,{orderID:L}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),Y.personal.name.trim().length<6)t("Name should be at least 6 characters long!");else if(Y.personal.phone.trim().length<10)t("Phone number is badly formated.");else if(Y.details.county.trim().length<3)t("Invalid County!");else if(Y.details.city.trim().length<3)t("Invalid City!");else if(Y.details.address.trim().length<10)t("Invalid address!");else if(Y.details.postal.trim().length<6)t("Invalid postal code!");else{F(!0);var n=new Date,r=String(n.getDate()).padStart(2,"0"),a=String(n.getMonth()+1).padStart(2,"0"),c=n.getFullYear();n=a+"/"+r+"/"+c,h?Object(d.f)(x,y,_,n,Y,L):Object(d.g)(x,y,_,n,Y,L),g({type:"DELETE_BASKET"})}},className:o.a.userDetails,children:[Object(D.jsxs)("label",{className:o.a.inputLabel,htmlFor:"name",children:["Name",Object(D.jsx)("input",{onChange:q("personal","name"),value:Y.personal.name,placeholder:"Chuck Norris",id:"name",type:"name"})]}),Object(D.jsxs)("label",{className:o.a.inputLabel,htmlFor:"phone",children:["Phone number",Object(D.jsx)("input",{onChange:q("personal","phone"),value:Y.personal.phone,placeholder:"07xxxxxxxx",id:"phone",type:"number"})]}),Object(D.jsxs)("label",{className:o.a.inputLabel,htmlFor:"county",children:["County",Object(D.jsx)("input",{onChange:q("details","county"),value:Y.details.county,placeholder:"Cluj",id:"county",type:"county"})]}),Object(D.jsxs)("label",{className:o.a.inputLabel,htmlFor:"city",children:["City",Object(D.jsx)("input",{onChange:q("details","city"),value:Y.details.city,placeholder:"Cluj-Napoca",id:"city",type:"city"})]}),Object(D.jsxs)("label",{className:o.a.inputLabel,htmlFor:"address",children:["Address",Object(D.jsx)("input",{onChange:q("details","address"),value:Y.details.address,placeholder:"street nr. bl.",id:"address",type:"address"})]}),Object(D.jsxs)("label",{className:o.a.inputLabel,htmlFor:"postal",children:["Postal code",Object(D.jsx)("input",{onChange:q("details","postal"),value:Y.details.postal,placeholder:"407035",id:"postal",type:"number"})]}),Object(D.jsxs)("button",{type:"button",onClick:T,className:P?o.a.paymentMethodBtn:o.a.paymentMethodBtn+" "+o.a.active,children:["Pay at product delivery \xa0",!P&&Object(D.jsx)(b.a,{})," "]}),Object(D.jsxs)("button",{type:"button",onClick:T,className:P?o.a.paymentMethodBtn+" "+o.a.active:o.a.paymentMethodBtn,children:["Pay by Card \xa0",P&&Object(D.jsx)(b.a,{})," "]}),P&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("label",{className:o.a.inputLabel,htmlFor:"cardholder",children:["Card Holder Name",Object(D.jsx)("input",{onChange:q("card","cardholder"),value:Y.card.cardholder,placeholder:"Jean-Claude Van Damme",id:"cardholder",type:"cardholder"})]}),Object(D.jsxs)("label",{className:o.a.inputLabel,htmlFor:"cardnumber",children:["Card Number",Object(D.jsx)("input",{onChange:q("card","cardnumber"),value:Y.card.cardnumber,placeholder:"4242 4242 4242 4242",id:"cardnumber",type:"cardnumber"})]}),Object(D.jsxs)("label",{className:o.a.inputLabel,htmlFor:"cardcvc",children:["Card CVC",Object(D.jsx)("input",{onChange:q("card","cardcvc"),value:Y.card.cardcvc,placeholder:"222",id:"cardcvc",type:"number"})]}),Object(D.jsxs)("label",{className:o.a.inputLabel,htmlFor:"expire",children:["Card Expiration Date",Object(D.jsx)("input",{onChange:q("card","expire"),value:Y.card.expire,id:"expire",type:"date"})]})]}),Object(D.jsxs)("button",{className:o.a.submitBtn,type:"submit",children:["Place Order \xa0",Object(D.jsx)(j.a,{})]})]}),Object(D.jsxs)("h2",{className:o.a.summary,children:["You have"," ",Object(D.jsxs)("span",{children:[y," ",1===y?"item":"items"]})," ","in you basket with a total of"," ",Object(D.jsxs)("span",{children:[Object(D.jsx)(O.a,{value:_.toFixed(2),displayType:"text",thousandSeparator:!0})," ","RON"]})]}),Object(D.jsx)(k.a,{children:null===x||void 0===x?void 0:x.map((function(e){return Object(D.jsx)(m.a,{onDelete:U,onDecrease:K,onIncrease:G,ammount:e.productAmmount,name:e.productName,price:e.productPrice,image:e.productImage,id:e.productID},e.productID)}))})]})})}}}]);
//# sourceMappingURL=7.d1ff8553.chunk.js.map