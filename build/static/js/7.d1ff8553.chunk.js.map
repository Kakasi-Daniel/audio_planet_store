{"version":3,"sources":["http.js","Components/CheckoutProduct.jsx","Components/CheckoutProduct.module.scss","Pages/OrderDetails.module.scss","Components/OrderSucces.module.scss","Components/OrderSucces.jsx","Pages/OrderDetails.jsx"],"names":["getArrayProducts","a","database","ref","child","get","key","response","productsObjects","val","productsArray","push","ID","brand","full_name","fullname","photo","type","price","getProductByID","product","getUserDetailsByID","details","sendUserDetails","phone","county","city","address","postal","auth","currentUser","uid","set","error","console","log","sendOrder","basket","totalItems","totalAmmount","date","orderDetails","orderID","sendOrderNoAccount","getUserOrdersByID","orders","ordersArray","total","getOrderByID","order","CheckoutProduct","forwardRef","props","className","classes","to","id","productDescription","productImage","draggable","src","image","alt","productText","name","controls","ammountControls","onClick","onDecrease","minus","ammount","productToAdd","productID","onIncrease","plus","onDelete","deleteItem","module","exports","OrderSucces","useState","seconds","setSeconds","history","useHistory","useEffect","interval","setInterval","prev","clearInterval","orderSucces","thankGif","OrderDetails","inputsError","useContext","globalContext","user","basketItems","basketTotal","dispatchGlobal","payWithCard","setPayWithCard","orderSent","setOrderSent","rand","generate","methodChangeHandler","e","preventDefault","personal","card","cardholder","cardnumber","cardcvc","cardexpire","inputs","setInputs","then","data","displayName","stepOne","backOne","onInputChangeGenerator","field","prevInputs","newType","target","value","Container","myAccountPage","onSubmit","trim","length","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","userDetails","inputLabel","htmlFor","onChange","placeholder","paymentMethodBtn","active","expire","submitBtn","summary","toFixed","displayType","thousandSeparator","map","productAmmount","productName","productPrice"],"mappings":"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","file":"static/js/7.d1ff8553.chunk.js","sourcesContent":["import {database,auth} from './firebase'\n\nexport const getArrayProducts = async () =>{\n    const response = await database.ref().child('products').get();\n    const productsObjects = response.val()\n\n    const productsArray = [];\n\n    for(let key in productsObjects){\n        productsArray.push({\n            ID: key,\n            brand: productsObjects[key].brand,\n            full_name: productsObjects[key].fullname,\n            photo: productsObjects[key].photo,\n            type: productsObjects[key].type,\n            price: productsObjects[key].price\n        })\n    }\n\n    return productsArray;\n}\nexport const getProductByID= async (ID) =>{\n    const response = await database.ref().child('products').child(ID).get();\n    const product = response.val()\n\n    return product;\n}\n\nexport const getUserDetailsByID= async (ID) =>{\n    const response = await database.ref().child('users').child(ID).child('userDetails').get();\n    const details = response.val();\n\n    return details;\n}\n\nexport const sendUserDetails = (phone,county,city,address,postal) =>{\n    database.ref('users/' + auth.currentUser.uid+\"/userDetails\").set({\n        phone: phone,\n        county: county,\n        city: city,\n        address: address,\n        postal: postal\n      }, (error) => {\n        if (error) {\n          console.log('updateing user detail failed' + error)\n        } else {\n          console.log(\"user details saved\")\n        }\n      });\n}\n\n\n\nexport const sendOrder = (basket,totalItems,totalAmmount,date,orderDetails,orderID) =>{\n    database.ref('users/' + auth.currentUser.uid+\"/orders/\"+orderID).set({\n       basket,\n       totalItems,\n       totalAmmount,\n       orderDetails,\n       date\n      }, (error) => {\n        if (error) {\n          console.log('error at sending orde' + error)\n        } else {\n          console.log(\"orderSent\")\n        }\n      });\n}\n\nexport const sendOrderNoAccount = (basket,totalItems,totalAmmount,date,orderDetails,orderID) =>{\n    database.ref('orders/'+orderID).set({\n       basket,\n       totalItems,\n       totalAmmount,\n       orderDetails,\n       date\n      }, (error) => {\n        if (error) {\n          console.log('error at sending orde' + error)\n        } else {\n          console.log(\"orderSent\")\n        }\n      });\n}\n\nexport const getUserOrdersByID = async (ID) =>{\n  const response = await database.ref().child('users').child(ID).child('orders').get();\n  const orders = response.val();\n\n  const ordersArray = []\n\n  for(let key in orders){\n    ordersArray.push({\n      orderID: key,\n      total: orders[key].totalAmmount,\n      date: orders[key].date,\n    })\n  }\n\n  return ordersArray;\n}\n\nexport const getOrderByID = async (uid,orderID) =>{\n  const response = await database.ref().child('users').child(uid).child('orders').child(orderID).get();\n  const order = response.val();\n\n\n  return order;\n}\n\n\n\n","import classes from './CheckoutProduct.module.scss';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport {Link} from 'react-router-dom'\nimport { forwardRef } from 'react';\n\nconst CheckoutProduct = forwardRef((props,ref) => {\n\n    const addToBasketOne = () =>{\n        const productToAdd = {productID: props.id};\n        props.onIncrease(productToAdd)\n    }\n\n    const decreaseFromBasketOne = () =>{\n        props.onDecrease(props.id)\n    }\n\n    const deleteHandler = () =>{\n        props.onDelete(props.id)\n    }\n\n    return (\n        <div ref={ref} className={classes.product} >\n            <Link to={'products/'+props.id} className={classes.productDescription}>\n                <div className={classes.productImage}>\n                    <img draggable=\"false\" src={props.image} alt=\"\" />\n                </div>\n                <div className={classes.productText}>\n                    <h3>{props.name}</h3>\n                    <p>{props.price} RON buc.</p>\n                </div>\n            </Link>\n            <div className={classes.controls}>\n                <div className={classes.ammountControls}>\n                    <button onClick={decreaseFromBasketOne} className={classes.minus} >-</button>\n                    <p>{props.ammount}</p>\n                    <button  onClick={addToBasketOne} className={classes.plus}>+</button>\n                </div>\n                <button onClick={deleteHandler} className={classes.deleteItem}><DeleteIcon/></button>\n            </div>\n        </div>\n    )\n})\n\nexport default CheckoutProduct\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"product\":\"CheckoutProduct_product__1IkBP\",\"productDescription\":\"CheckoutProduct_productDescription__P8OEp\",\"productText\":\"CheckoutProduct_productText__5PxhV\",\"productImage\":\"CheckoutProduct_productImage__2m3YL\",\"controls\":\"CheckoutProduct_controls__PmVIs\",\"ammountControls\":\"CheckoutProduct_ammountControls__1PxFi\",\"deleteItem\":\"CheckoutProduct_deleteItem__34JfN\",\"minus\":\"CheckoutProduct_minus__1JzKZ\",\"plus\":\"CheckoutProduct_plus__2Y4ib\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"myAccountPage\":\"OrderDetails_myAccountPage__3cRj3\",\"userDetails\":\"OrderDetails_userDetails__1W_yM\",\"inputLabel\":\"OrderDetails_inputLabel__3J2Ud\",\"submitBtn\":\"OrderDetails_submitBtn__1dBDm\",\"paymentMethodBtn\":\"OrderDetails_paymentMethodBtn__1vsOn\",\"active\":\"OrderDetails_active__1w2rm\",\"summary\":\"OrderDetails_summary__1btMC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orderSucces\":\"OrderSucces_orderSucces__iJr_6\",\"thankGif\":\"OrderSucces_thankGif__7GQj0\"};","import classes from \"./OrderSucces.module.scss\";\nimport {useHistory,Link} from 'react-router-dom';\nimport {auth} from '../firebase'\nimport {useState,useEffect} from 'react';\n\nfunction OrderSucces({orderID}) {\n\n    const [seconds, setSeconds] = useState(10);\n\n    const history = useHistory();\n\n    useEffect(() =>{\n        const interval = setInterval(() =>{\n            setSeconds(prev => prev-1)\n        },1000)\n        return () => {\n            clearInterval(interval)\n        }\n    },[])\n\n   \n    if(seconds === 0){\n        history.push('/');\n    }\n\n    return (\n        <div className={classes.orderSucces}>\n            <div className={classes.thankGif}>\n              <img draggable=\"false\" src=\"https://c.tenor.com/AEq_MsuoaXsAAAAC/leonardo-dicaprio-thank-you.gif\" alt=\"thank_you\" />\n            </div>\n            <h2>Thanks for your muney!</h2>\n            <p>Your order ID is : <span>{orderID}</span></p>\n            {auth.currentUser && <p>You can view all your orders in <Link to=\"myorders\" >My orders</Link> section</p>}\n            <p>You will be redirected to <Link to=\"/\">main page</Link> in {seconds} seconds</p>\n        </div>\n    )\n}\n\nexport default OrderSucces\n","import classes from './OrderDetails.module.scss';\nimport Container from '../UI/Container';\nimport { useState, useEffect } from 'react';\nimport { useContext } from 'react';\nimport globalContext from '../globalState';\nimport { getUserDetailsByID, sendOrder, sendOrderNoAccount } from '../http';\nimport CheckIcon from '@material-ui/icons/Check';\nimport SendIcon from '@material-ui/icons/Send';\nimport CheckoutProduct from '../Components/CheckoutProduct';\nimport { useHistory } from 'react-router-dom';\nimport NumberFormat from 'react-number-format';\nimport rand from 'random-key';\nimport OrderSucces from '../Components/OrderSucces';\nimport FlipMove from 'react-flip-move';\n\nfunction OrderDetails({inputsError}) {\n  const [{ user, basket, basketItems, basketTotal }, dispatchGlobal] =\n    useContext(globalContext);\n  const [payWithCard, setPayWithCard] = useState(true);\n  const [orderSent, setOrderSent] = useState(false);\n  const [orderID, ] = useState(rand.generate())\n  \n\n  const history = useHistory();\n\n  const sendOrderHandler = (e) => {\n    e.preventDefault();\n    \n    if(inputs.personal.name.trim().length < 6){\n      inputsError(\"Name should be at least 6 characters long!\")\n    }\n    else if(inputs.personal.phone.trim().length < 10){\n      inputsError(\"Phone number is badly formated.\")\n    }\n    else if(inputs.details.county.trim().length < 3){\n      inputsError(\"Invalid County!\")\n    }\n    else if(inputs.details.city.trim().length < 3){\n      inputsError(\"Invalid City!\")\n    }\n    else if(inputs.details.address.trim().length < 10){\n      inputsError(\"Invalid address!\")\n    }\n    else if(inputs.details.postal.trim().length < 6){\n      inputsError(\"Invalid postal code!\")\n    }\n    else{\n      setOrderSent(true);\n      let today = new Date();\n      const dd = String(today.getDate()).padStart(2, '0');\n      const mm = String(today.getMonth() + 1).padStart(2, '0');\n      const yyyy = today.getFullYear();\n  \n      today = mm + '/' + dd + '/' + yyyy;\n  \n      if (user) {\n        sendOrder(basket, basketItems, basketTotal, today, inputs, orderID);\n      } else {\n        sendOrderNoAccount(\n          basket,\n          basketItems,\n          basketTotal,\n          today,\n          inputs,\n          orderID\n        );\n      }\n      dispatchGlobal({ type: 'DELETE_BASKET' });\n    }\n\n  };\n\n  const methodChangeHandler = (e) => {\n    e.preventDefault();\n    setPayWithCard((prev) => !prev);\n  };\n\n  const [inputs, setInputs] = useState({\n    personal: {\n      name: '',\n      phone: '',\n    },\n    details: {\n      county: '',\n      city: '',\n      address: '',\n      postal: '',\n    },\n    card: {\n      cardholder: '',\n      cardnumber: '',\n      cardcvc: '',\n      cardexpire: '',\n    },\n  });\n\n  useEffect(() => {\n    if (user) {\n      getUserDetailsByID(user.uid).then((data) => {\n        setInputs({\n          personal: {\n            name: user.displayName,\n            phone: data?.phone || '',\n          },\n          details: {\n            county: data?.county || '',\n            city: data?.city || '',\n            address: data?.address || '',\n            postal: data?.postal || '',\n          },\n          card: {\n            cardholder: \"It's on me this time \",\n            cardnumber: '4242 4242 4242 4242',\n            cardcvc: '999',\n            cardexpire: '',\n          },\n        });\n      });\n    }\n  }, [user]);\n\n  const stepOne = (product) => {\n    dispatchGlobal({ type: 'ADD_TO_BASKET', product: product, ammount: 1 });\n  };\n\n  const backOne = (product) => {\n    dispatchGlobal({ type: 'DECREASE_ONE', productID: product });\n  };\n  const deleteItem = (product) => {\n    dispatchGlobal({ type: 'REMOVE_FROM_BASKET', productID: product });\n  };\n\n  const onInputChangeGenerator = (type, field) => {\n    return function (e) {\n      setInputs((prevInputs) => {\n        const newType = { ...prevInputs[type] };\n        newType[field] = e.target.value;\n\n        return {\n          ...prevInputs,\n          [type]: {\n            ...newType,\n          },\n        };\n      });\n    };\n  };\n\n  if (!basketItems && !orderSent) {\n    history.push('checkout');\n  }\n\n  return (\n    <Container className={classes.myAccountPage}>\n      {!orderSent ? (\n        <>\n          <form onSubmit={sendOrderHandler} className={classes.userDetails}>\n            <label className={classes.inputLabel} htmlFor=\"name\">\n              Name\n              <input\n                onChange={onInputChangeGenerator('personal', 'name')}\n                value={inputs.personal.name}\n                placeholder=\"Chuck Norris\"\n                id=\"name\"\n                type=\"name\"\n              />\n            </label>\n            <label className={classes.inputLabel} htmlFor=\"phone\">\n              Phone number\n              <input\n                onChange={onInputChangeGenerator('personal', 'phone')}\n                value={inputs.personal.phone}\n                placeholder=\"07xxxxxxxx\"\n                id=\"phone\"\n                type=\"number\"\n              />\n            </label>\n            <label className={classes.inputLabel} htmlFor=\"county\">\n              County\n              <input\n                onChange={onInputChangeGenerator('details', 'county')}\n                value={inputs.details.county}\n                placeholder=\"Cluj\"\n                id=\"county\"\n                type=\"county\"\n              />\n            </label>\n            <label className={classes.inputLabel} htmlFor=\"city\">\n              City\n              <input\n                onChange={onInputChangeGenerator('details', 'city')}\n                value={inputs.details.city}\n                placeholder=\"Cluj-Napoca\"\n                id=\"city\"\n                type=\"city\"\n              />\n            </label>\n            <label className={classes.inputLabel} htmlFor=\"address\">\n              Address\n              <input\n                onChange={onInputChangeGenerator('details', 'address')}\n                value={inputs.details.address}\n                placeholder=\"street nr. bl.\"\n                id=\"address\"\n                type=\"address\"\n              />\n            </label>\n            <label className={classes.inputLabel} htmlFor=\"postal\">\n              Postal code\n              <input\n                onChange={onInputChangeGenerator('details', 'postal')}\n                value={inputs.details.postal}\n                placeholder=\"407035\"\n                id=\"postal\"\n                type=\"number\"\n              />\n            </label>\n            <button\n              type=\"button\"\n              onClick={methodChangeHandler}\n              className={\n                !payWithCard\n                  ? classes.paymentMethodBtn + ' ' + classes.active\n                  : classes.paymentMethodBtn\n              }\n            >\n              Pay at product delivery &nbsp;{!payWithCard && <CheckIcon />}{' '}\n            </button>\n            <button\n              type=\"button\"\n              onClick={methodChangeHandler}\n              className={\n                payWithCard\n                  ? classes.paymentMethodBtn + ' ' + classes.active\n                  : classes.paymentMethodBtn\n              }\n            >\n              Pay by Card &nbsp;{payWithCard && <CheckIcon />}{' '}\n            </button>\n            {payWithCard && (\n              <>\n                <label className={classes.inputLabel} htmlFor=\"cardholder\">\n                  Card Holder Name\n                  <input\n                    onChange={onInputChangeGenerator('card', 'cardholder')}\n                    value={inputs.card.cardholder}\n                    placeholder=\"Jean-Claude Van Damme\"\n                    id=\"cardholder\"\n                    type=\"cardholder\"\n                  />\n                </label>\n                <label className={classes.inputLabel} htmlFor=\"cardnumber\">\n                  Card Number\n                  <input\n                    onChange={onInputChangeGenerator('card', 'cardnumber')}\n                    value={inputs.card.cardnumber}\n                    placeholder=\"4242 4242 4242 4242\"\n                    id=\"cardnumber\"\n                    type=\"cardnumber\"\n                  />\n                </label>\n                <label className={classes.inputLabel} htmlFor=\"cardcvc\">\n                  Card CVC\n                  <input\n                    onChange={onInputChangeGenerator('card', 'cardcvc')}\n                    value={inputs.card.cardcvc}\n                    placeholder=\"222\"\n                    id=\"cardcvc\"\n                    type=\"number\"\n                  />\n                </label>\n                <label className={classes.inputLabel} htmlFor=\"expire\">\n                  Card Expiration Date\n                  <input\n                    onChange={onInputChangeGenerator('card', 'expire')}\n                    value={inputs.card.expire}\n                    id=\"expire\"\n                    type=\"date\"\n                  />\n                </label>\n              </>\n            )}\n            <button className={classes.submitBtn} type=\"submit\">\n              Place Order &nbsp;\n              <SendIcon />\n            </button>\n          </form>\n\n          <h2 className={classes.summary}>\n            You have{' '}\n            <span>\n              {basketItems} {basketItems === 1 ? 'item' : 'items'}\n            </span>{' '}\n            in you basket with a total of{' '}\n            <span>\n              <NumberFormat\n                value={basketTotal.toFixed(2)}\n                displayType={'text'}\n                thousandSeparator={true}\n              />{' '}\n              RON\n            </span>\n          </h2>\n\n          <FlipMove>\n          {basket?.map((product) => {\n            return (\n              <CheckoutProduct\n                key={product.productID}\n                onDelete={deleteItem}\n                onDecrease={backOne}\n                onIncrease={stepOne}\n                ammount={product.productAmmount}\n                name={product.productName}\n                price={product.productPrice}\n                image={product.productImage}\n                id={product.productID}\n              />\n            );\n          })}\n          </FlipMove>\n        </>\n      ) : \n          <OrderSucces orderID={orderID}/>\n      }\n    </Container>\n  );\n}\n\nexport default OrderDetails;\n"],"sourceRoot":""}